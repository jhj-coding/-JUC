### 面向对象特性

封装，继承，多态

### a=a+b与a+=b 区别

a+=b 会把结果的数据类型强转为a的类型

### 3*0.1 == 0.3 将会返回什么? true 还是 false?

返回 false 因为浮点数不精确

### 能在 Switch 中使用 String 吗?

可以，本质使用的是其Hashcode

### 对equals()和hashCode()的理解?

重写equals 方法时必须重写hashCode方法，因为equals 相等则两个对象相等，两个对象相等其hashcode必须相等，hashcode相等 两个对象不一定相等因为有hash冲突

### final、finalize 和 finally 的不同之处?

final用于修饰变量 方法 类，final修饰的变量不可变

finalize方法在对象没有被引用，垃圾回收器回收时会调用

finally 用于try cache 方法结束时调用

### String、StringBuffer与StringBuilder的区别？

String 是不可变的

StringBuffer和StringBuilder是可变的

String StringBuffer是线程安全的 StringBuilder线程不安全

### 接口与抽象类的区别？

子类可以实现多个接口 只能继承一个抽象类

接口没有构造方法 抽象类可以有构造方法

接口不能有普通成员变量 抽象类可以有普通成员变量

接口静态成员变量只能是public static 抽象类可以随意

接口必须有抽象方法 抽象类可以没有抽象方法

接口不能有静态方法方法 抽象类可以有静态方法

接口的方法只能是pubilc abstract 抽象类可以public protect

###  this() & super()在构造方法中的区别？

this是指针 super是关键字

子类通过super 调用父类方法 只能在第一行使用

this 在构造函数中调用本类方法 只能在第一行使用

this 不能调用两个

this super 不能用在静态环境

### Java移位运算符？

左移 右移负数补1 无符号右移

### 为什么需要泛型？

不同类型的数据使用相同方法

编译检查 类型安全

### 泛型类如何定义使用？

```java
public Class T{
    
}
```

### 泛型接口如何定义使用？

```
public Interface T{
    
}
```

### 泛型方法如何定义使用？

```
public <T> T test(Class<T> t){
return t.newInstance()
}
```

### 泛型的上限和下限？

上限 继承extends  下限父类 super

### 如何理解Java中的泛型是伪泛型？

在编译器会进行泛型擦除，将泛型转换为真正使用的类型，因此称为伪泛型。

### 注解的作用？

编译检查

生成文档

编译时动态处理

运行时动态处理

### 注解的常见分类？

jdk 提供的注解 @Overide @Swaring @Dec

自定义注解

元注解

@Retation 保留到哪个运行时期

@Target 作用对象

@Inte 可继承

@Document 生成文档

### Java异常类层次结构?

父类 Throwable

Exception Error

RunEcception 编译时异常

### 可查的异常（checked exceptions）和不可查的异常（unchecked exceptions）区别？

可查异常 就是编译时异常 不处理 变异不用过

不可查异常就是 运行时异常和错误 是在运行期间可能会发生的异常

### throw和throws的区别？

throw 用于抛出一个新的异常

throws 用于声明异常 便于让其他方法发现该方法有什么异常

### Java 7 的 try-with-resource?

实现autocloseable 的类可以在try with 中等到try catch方法执行完成时自动关闭资源

### 异常的底层？

异常的底层是有一个异常表，记录了从哪到哪 发生异常 解决异常的是在第几行 抛出的是什么异常

### 什么是反射？

在程序运行过程中，可以获取类的信息和方法可以获取到对象的信息和方法，这种动态获取信息的方法称为反射

### 反射的使用？

加载类 class.forname .class .getClass

构造方法

方法

属性

### getName、getCanonicalName与getSimpleName的区别?

getName 类的全限定名

getCanonicalName 类的全限定名 便于输出

getSimpleName 只有类名

### 什么是SPI机制？

spi 机制是jdk 提供的服务发现提供机制，供插件扩展和框架扩展

将实现方放到外面，自行选择实现方式

### SPI机制的应用？

数据库连接池 有多种数据库连接池 只要导进来包就会自动选择 就是利用SPI机制

### SPI机制的简单示例？

写一个接口 多个类实现接口 要使用那个 在resource Meta-Inf/Services 下创建服务接口命名文件 文件里写类全限定名

利用serviceLoad 加载接口 即可找到

### 集合有哪些类？

set HashSet 无序（和插入顺序不一致） LinkedHashSet 有序 TreeSet 红黑树 有序

List ArrayList LinkedList Verot（线程安全） CopyonWriteList

Queue LinkedList 实现栈和队列 PrioriQueue (堆)

### ArrayList的底层？

ArrayList 底层是数组 每次插入前会判断一下是否到达最大容量，如果达到则进行扩容 扩容是拷贝数组

### ArrayList自动扩容？

插入前会判断一下 如果达到则调用ensureCapi方法进行扩容 里面调用grow 方法 扩容为原来的1.5倍

### ArrayList的Fail-Fast机制？

里面有一个modCount 计数器，记录ArrayList 被修改的次数，如果在循环过程中发现次数不一样则会报错，可以使用迭代器的删除进行删除。

### Map有哪些类？

HashMap

LinkedHashMap

HashTable

ConCurrentHashMap

TreeMap

### JDK7 HashMap如何实现？

是分段锁 数组 链表 扩容 初始容量*负载因子

### JDK8 HashMap如何实现？

是数组 链表 红黑树

### HashSet是如何实现的？

hashSet是对HashMap的简单包装，其本质实现方法还是调用HashMap中的方法。

### 多线程的出现是要解决什么问题的? 本质什么?

多线程出现主要是为了解决CPU io 内存 速度差异大问题

为了解决cpu与内存差异 增加了缓存 造成了可见性问题

为了解决Cpu与io差异 增加线程 进程 分时复用 造成原子性问题

编译器进行指令重排序 造成有序性问题

### Java是怎么解决并发问题的?

jmm java内存模型

内存屏障

happens-before规则

Sychornized

volatile

final

### 线程安全有哪些实现思路?

阻塞同步

锁

非阻塞同步

CAS 内存模型

无锁

同一个方法内 没有调用其他同步共享代码

同一个线程 线程本地存储

### 如何理解并发和并行的区别?

并发 指的是一个CPU同时处理多个任务

并行 指的是 多核CPU处理多个不同任务

### 线程有哪几种状态? 分别说明从一种状态到另一种状态转变有哪些方式?

新建 运行 阻塞 等待 无限等待 死亡

new start sleep wait wait stop

### 通常线程有哪几种使用方式?

Runable

callable

Thread

### 基础线程机制有哪些?

Executor

守护线程

join

yeild

### 线程的中断方式有哪些?

interpet

interpeted

showdown showdownnow

### 线程的互斥同步方式有哪些? 如何比较和选择?

Sychornize rertranlock

非公平 公平非公平

不可中断 可中断

一个条件 多个条件

jvm jdk

性能差不多

### 线程之间有哪些协作方式?

join wait notify notifyall

await sinal sinalall

### Synchronized可以作用在哪里?

方法 对象 类

### Synchronized本质上是通过什么保证线程安全的?

监视器指令 监视器计数器 ++ -- 可重入锁

### Synchronized使得同时只有一个线程可以执行，性能比较差，有什么提升的方法?

锁粗化

锁消除

轻量级锁

偏向锁

自适应自旋锁

### Synchronized由什么样的缺陷? Java Lock是怎么弥补这些缺陷的?

只能有一个条件 与Conditional结合 多个条件

无法获取锁状态 try

不可中断 可优先响应中断和超时时间

### Synchronized和Lock的对比，和选择?

公平不公平

JVM JDK

可中断 不可中断

状态 可获取状态

少量同步 大量同步

单一条件 多个条件

指令 CAS

### Synchronized在使用时有何注意事项?

避免对象为空 锁信息存储在对象头

避免死锁

作用域不要太大

能不用就不用 尽量用synchronized

### Synchronized修饰的方法在抛出异常时,会释放锁吗?

会

### 多个线程等待同一个Synchronized锁的时候，JVM如何选择下一个获取锁的线程?

抢占式

### synchronized是公平锁吗？

不是

### volatile关键字的作用是什么?

保证可见性 有序性 单词读写的原子性

### volatile能保证原子性吗?

只能保证单次读写的原子性

### 32位机器上共享的long和double变量的为什么要用volatile?

高32位和低32位 保证单次读写的原子性

### volatile是如何实现可见性的?

内存屏障

### volatile是如何实现有序性的?

happens-before规则

### 说下volatile的应用场景?

对变量的修改不依赖于当前值

该变量不存在其他变量的可变式中

该变量的状态不依赖于其他内容

双重检查单例模式

```java
public class c{
    private volatile static C c;
    private C(){
        
    }
    public static C get(){
        if(c==null){
            Synchronized(C.class){
                if(c==null){
                	c=new C();
                }
            }
        }
        return c;
    }
}
```



### 所有的final修饰的字段都是编译期常量吗?

不是

### 如何理解private所修饰的方法是隐式的final?

private 修饰的方法不能被子类重写 并且不能被子类调用 对子类不可见 因此不可修改

### 说说final类型的类如何拓展?

采用外观模式

就是将该类作为一个成员 调用方法还调用该类的

### final方法可以被重载吗?

可以被重载

### 父类的final方法能不能够被子类重写?

不能

### 说说基本类型的final域重排序规则?

防止写重排序到构造函数之外

防止读在获取对象之前

### 说说final的原理?

构造方法结束前加入写写屏障

读取数据前加入读读屏障

### 如何从数据传输方式理解IO流？

数据传输分为字节流和字符流 Stream、Reader Writer 图片二进制文件 字节流 文本文件 字符流

### 如何从数据操作上理解IO流？

文件 管道 缓冲区 流的 输入输出的 转换的 数组的 基本数据类型的 对象序列化反序列化的

### Java IO设计上使用了什么设计模式？

使用装饰器模式 给被装饰者添加装饰 增加功能

### 类加载的生命周期？

加载 验证 准备 解析 初始化 使用 卸载

加载二进制文件

验证是一个合法的类

准备 静态变量初始化默认值找空间

解析 符号引用转换为直接引用

初始化 对静态变量赋值 对象进行赋值 空间

使用 使用堆中的对象

卸载 就是对象消亡

### 类加载器的层次?

主启动类加载器 lib xBootStrap 配置的

扩展类加载器 ext

应用类加载器 类路径下

自定义加载器

### Class.forName()和ClassLoader.loadClass()区别?

class.forName() jvm外 执行静态代码块构造对象

classLoader.loadClass() jvm中 不执行静态代码块 等newInstence时再执行静态方法

class.from()可以配置 执不执行静态代码块

### JVM有哪些类加载机制？

全盘托管 与该类相关的类都由加载该类的加载器 加载

父类委托 委托给父类进行加载

缓存机制 加入缓存 有则不加载

双亲委派 先给父加载 父成功则不再子加载 一直到子如果还没有加载成功就报classnotFound异常

### 说说JVM内存整体的结构？线程私有还是共享的？

方法区 堆 堆外内存 虚拟机栈 本地方法栈 程序计数器

私有 虚拟机栈 本地方法栈 程序计数器

共享 堆 堆外内存 方法区

### 什么是程序计数器（线程私有）？

程序计数器中存储着下一条指令的地址，执行引擎加载下一条指令。因为线程每次中断和恢复需要知道本次执行到哪里了，所以程序计数器是私有的。

### 什么是虚拟机栈（线程私有）？

虚拟机栈管理着java 方法的调用 每个线程私有 内部是一个个栈帧生命周期和线程一样

栈帧的内部结构

局部变量表 操作数栈 动态链接 方法返回地址 返回信息 其他信息

特点

方法调用入栈 调用完成出栈

访问速度快 仅次于程序计数器

栈不存在垃圾回收

通过xss 调整 最大内存

有什么异常

如果是固定内存 超出 包stackover

如果是动态的 不能再分配 报oom

### Java虚拟机栈如何进行方法计算的？

局部变量表存值取值 操作数栈 计算

 

### 什么是事务？事务基本特性ACID？

事务是一组满足ACID的操作

A 原子性 要么全成功要么全失败

C 一致性 从一个一致性状态转换到另一个一致性状态

I 隔离性 一个事务没有提交 其他事务就看不见

D 持久性 一旦事务提交 被永久保存到数据库中

### 数据库中并发一致性问题？

丢失修改 一个线程修改给另一个线程覆盖了

脏读 读取到一个线程还没有提交的数据

不可重复读 读取时一个线程读取到两个不同的值

幻读 范围查询 一个线程读取到不一样大小的数据量

### 事务的隔离等级？

读未提交 读到未提交的值

读已提交 读到的值都是已提交的 解决脏读问题

可重复读 一个线程重复读结果一致 解决不可重复读

串行化 解决幻读问题

### ACID靠什么保证的呢？

A 靠undo_log

C 业务

I MVCC

D redo_log

### SQL 优化的实践经验？

避免使用Select * 

避免在where 中使用or

避免隐式转换 是什么类型就用什么类型

避免where 中用in

使用索引

索引数量不能超过6个

### Buffer Pool、Redo Log Buffer 和undo log、redo log、bin log 概念以及关系？

buffer pool mysql 缓存 增删改查在这里执行

undo_log 操作前的数据

redo_log 操作后的数据

bin_log 操作日志

### 从准备更新一条数据到事务的提交的流程描述？

先去bufferpool 中找 有更新

没有查数据库 查到写入buffer pool 同时写入undo_log

在buffer pool 进行修改 写入redolog Buffer

提交后 写入redo_log 同时在bin_log中记录操作

将bin_log 的文件名和位置 记录到redo_log中 并加上commit 标识

### 能说下myisam 和 innodb的区别吗？

myisam 不支持行锁 事务 外键 可以全文索引、压缩、空间索引 索引和数据分开存储

innode 支持行锁 事务 外键 索引和数据在一起存储 并发利用MVCC

### 说下MySQL的索引有哪些吧？

B+

Hash

全文索引

地理空间索引





唯一

主键

联合

普通

全文

覆盖

### 什么是B+树？为什么B+树成为主要的SQL数据库的索引实现？

B+树是在B树的基础上 在叶子节点之间添加了顺序指针 叶子节点是有顺序的 从左到右非递增排序

减少IO操作 查找效率高

加载页时 预先加载 因为是从小到大排列的

范围查找

### 那你知道什么是覆盖索引和回表吗？

覆盖索引指的索引包含或就是查找的字段，不用回表

否则 先查出来id 再根据id 进行回表查数据

### 什么是MVCC？ 说说MySQL实现MVCC的原理？

MVCC是多版本并发控制

实现原理是隐藏字段+undo_log+readView

隐藏字段中包含事务id 主键id 回滚指针

undo_log 中回滚指针指向上一个事务id 构成链表

readView 中记录了本次事务的id列表，当列表中最小值大于事务id 说明可见 否则不可见

不可重复读是每次都生成一个readView

可重复读是共用一个readView

### MySQL 锁的类型有哪些呢？

表锁 

意向共享锁

意向排他锁

行锁

共享锁 排他锁

### 你们数据量级多大？分库分表怎么做的？

根据业务进行分库

不相关的字段 垂直拆分 表

数据量大的话 对表进行水平拆分

### 那分表后的ID怎么保证唯一性的呢？

不同的数据库进行初始值和自增长

分布式id 雪花算法

业务上的唯一值 比如订单号

### 分表后非sharding_key的查询怎么处理呢？

做一个map 映射 先查询再查询

将该字段值后几位拼上sharding_key

### MySQL主从复制？

bin_log 记录的操作日志 通过i/o加载到从服务器 从服务器开启线程 重放这些操作

### MySQL主从的延迟怎么解决呢？

磁盘等 尽量一样 选用好的

高一致性的 强制直接读主

### MySQL读写分离方案?

主库和从库 主库负责读写 从库负责读 一般还有一个代理服务器 选择从哪个服务器读 或者sharding-jdbc





### 冒泡排序 每次前一个和后一个比较 将大的放在后面

```java
int[] nums={2,4,5,7,3,1};
int n=nums.length;
for(int i=n-1;i>0;i--){
    for(int j=0;j<i;j++){
        if(nums[j]>nums[j+1]){
            int temp=num[j];
            nums[j]=nums[j+1];
            nums[j+1]=temp;
        }
    }
}
return nums;
```







